{
  "pluginAlias": "MELCloud",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "This plugin works with Mitsubishi Air Conditioner, Heat Pump and Energy Recovery Ventilation devices connected to MELCloud service. Devices are exposed to HomeKit as separate accessories and each needs to be manually paired.\n\n1. Open the Home <img src='https://user-images.githubusercontent.com/3979615/78010622-4ea1d380-738e-11ea-8a17-e6a465eeec35.png' height='16.42px'> app on your device.\n2. Tap the <img src='https://user-images.githubusercontent.com/3979615/78010869-9aed1380-738e-11ea-9644-9f46b3633026.png' height='16.42px'>.\n3. Tap *Add Accessory*, and select *I Don't Have a Code or Cannot Scan* or *More Options*.\n4. Select Your accessory and press add anyway.\n5. Enter the PIN or scan the QR code, this can be found in Homebridge UI or Homebridge logs.\n6. Complete the accessory setup.",
  "footerDisplay": "For documentation please see [GitHub repository](https://github.com/grzegorz914/homebridge-melcloud-control).",
  "schema": {
    "type": "object",
    "properties": {
      "accounts": {
        "type": "array",
        "items": {
          "title": "MELCloud accounts",
          "type": "object",
          "properties": {
            "name": {
              "title": "Account name",
              "type": "string",
              "placeholder": "Account name",
              "description": "Here set the your account name.",
              "required": true
            },
            "user": {
              "title": "User",
              "type": "string",
              "placeholder": "User",
              "description": "Here set the MELCloud account username.",
              "required": true
            },
            "pass": {
              "title": "Password",
              "type": "string",
              "placeholder": "Password",
              "description": "Here set the MELCloud account password.",
              "required": true
            },
            "disableLogInfo": {
              "title": "Disable Log Info",
              "type": "boolean",
              "default": false,
              "description": "This disable display log values and states on every it change.",
              "required": false
            },
            "disableLogDeviceInfo": {
              "title": "Disable Log Device Info",
              "type": "boolean",
              "default": false,
              "description": "This disable display log device info on plugin restart.",
              "required": false
            },
            "enableDebugMode": {
              "title": "Debug",
              "type": "boolean",
              "default": false,
              "description": "This enable debug mode.",
              "required": false
            },
            "language": {
              "title": "Language",
              "type": "string",
              "minLength": 1,
              "maxLength": 2,
              "pattern": "^[0-9]+$",
              "default": "0",
              "description": "Here select the language used with MELCloud.",
              "oneOf": [{
                  "title": "English",
                  "enum": ["0"]
                },
                {
                  "title": "Български",
                  "enum": ["1"]
                },
                {
                  "title": "Čeština",
                  "enum": ["2"]
                },
                {
                  "title": "Dansk",
                  "enum": ["3"]
                },
                {
                  "title": "Deutsch",
                  "enum": ["4"]
                },
                {
                  "title": "Eesti",
                  "enum": ["5"]
                },
                {
                  "title": "Español",
                  "enum": ["6"]
                },
                {
                  "title": "Français",
                  "enum": ["7"]
                },
                {
                  "title": "Հայերեն",
                  "enum": ["8"]
                },
                {
                  "title": "Latviešu",
                  "enum": ["9"]
                },
                {
                  "title": "Lietuvių",
                  "enum": ["10"]
                },
                {
                  "title": "Magyar",
                  "enum": ["11"]
                },
                {
                  "title": "Nederlands",
                  "enum": ["12"]
                },
                {
                  "title": "Norwegian",
                  "enum": ["13"]
                },
                {
                  "title": "Polski",
                  "enum": ["14"]
                },
                {
                  "title": "Português",
                  "enum": ["15"]
                },
                {
                  "title": "Русский",
                  "enum": ["16"]
                },
                {
                  "title": "Suomi",
                  "enum": ["17"]
                },
                {
                  "title": "Svenska",
                  "enum": ["18"]
                },
                {
                  "title": "Italiano",
                  "enum": ["19"]
                },
                {
                  "title": "Українська",
                  "enum": ["20"]
                },
                {
                  "title": "Türkçe",
                  "enum": ["21"]
                },
                {
                  "title": "Ελληνικά",
                  "enum": ["22"]
                },
                {
                  "title": "Hrvatski",
                  "enum": ["23"]
                },
                {
                  "title": "Română",
                  "enum": ["24"]
                },
                {
                  "title": "Slovenščina",
                  "enum": ["25"]
                }
              ],
              "required": true
            },
            "displayMode": {
              "title": "Display mode",
              "type": "integer",
              "minimum": 0,
              "maximum": 1,
              "default": 0,
              "description": "Here select what a control mode You want to use.",
              "oneOf": [{
                  "title": "Heater/Cooler",
                  "enum": [
                    0
                  ]
                },
                {
                  "title": "Thermostat",
                  "enum": [
                    1
                  ]
                }
              ],
              "required": true
            },
            "enableMqtt": {
              "title": "Enable",
              "type": "boolean",
              "default": false,
              "required": false,
              "description": "This enable MQTT client."
            },
            "mqttHost": {
              "title": "IP/Hostname",
              "type": "string",
              "placeholder": "ip or hostname",
              "required": true,
              "format": "hostname",
              "description": "Here set the IP/Hostname of MQTT Broker.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true;"
              }
            },
            "mqttPort": {
              "title": "Port",
              "type": "integer",
              "placeholder": 1883,
              "required": true,
              "description": "Here set the port of MQTT Broker.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true;"
              }
            },
            "mqttPrefix": {
              "title": "Prefix",
              "type": "string",
              "placeholder": "home/openwebif",
              "required": false,
              "description": "Here set the prefix.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true;"
              }
            },
            "mqttAuth": {
              "title": "Authorization",
              "type": "boolean",
              "default": false,
              "required": false,
              "description": "This enable authorization for MQTT Broker.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true;"
              }
            },
            "mqttUser": {
              "title": "User",
              "type": "string",
              "placeholder": "user",
              "required": false,
              "description": "Here set the user of MQTT Broker.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true && model.accounts[arrayIndices].mqttAuth === true;"
              }
            },
            "mqttPasswd": {
              "title": "Password",
              "type": "string",
              "placeholder": "password",
              "required": false,
              "description": "Here set the password of MQTT Broker.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true && model.accounts[arrayIndices].mqttAuth === true;"
              }
            },
            "mqttDebug": {
              "title": "Debug",
              "type": "boolean",
              "default": false,
              "required": false,
              "description": "This enable debug mode for MQTT.",
              "condition": {
                "functionBody": "return model.accounts[arrayIndices].enableMqtt === true;"
              }
            }
          }
        }
      }
    }
  },
  "layout": [{
    "key": "accounts",
    "type": "tabarray",
    "title": "{{ value.name || 'new account' }}",
    "items": [
      "accounts[].name",
      "accounts[].user",
      "accounts[].pass",
      "accounts[].language",
      {
        "key": "accounts[]",
        "type": "section",
        "title": "Advanced Settings",
        "expandable": true,
        "expanded": false,
        "items": [
          "accounts[].enableDebugMode",
          "accounts[].disableLogInfo",
          "accounts[].disableLogDeviceInfo",
          "accounts[].displayMode"
        ]
      },
      {
        "key": "accounts[]",
        "type": "section",
        "title": "MQTT",
        "expandable": true,
        "expanded": false,
        "items": [
          "accounts[].enableMqtt",
          "accounts[].mqttHost",
          "accounts[].mqttPort",
          "accounts[].mqttPrefix",
          "accounts[].mqttAuth",
          "accounts[].mqttUser",
          "accounts[].mqttPasswd",
          "accounts[].mqttDebug"
        ]
      }
    ]
  }]
}